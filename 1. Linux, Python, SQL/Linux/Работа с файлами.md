<h1>Работа с файлами</h3>
<h4>1. Навигация</h4>

`pwd` - просмотреть текущую директорию

`ls` - список файлов и директорий
```bash
ls          # простой список
ls -l       # подробный список с правами, размерами, датами
ls -a       # показать скрытые файлы (начинающиеся с .)
ls -la      # комбинация -l и -a
ls -lh      # размеры в человеко-читаемом формате
```
`cd` - смена директории
```bash
cd /path     # перейти в указанный путь
cd ~         # перейти в домашнюю директорию
cd ..        # перейти на уровень выше
cd -         # вернуться в предыдущую директорию
```
<h4>2. Создание и удаление</h4>

`touch` - создать пустой файл
```bash
touch file.txt
touch file1.txt file2.txt
```
`mkdir` - создать директорию
```bash
mkdir new_folder
mkdir -p folder/subfolder  # создать вложенные директории
```
`mv` - перемещение или переименование
```bash
mv old_name.txt new_name.txt        # переименовать
mv file.txt /path/to/destination/   # переместить
```
`rm` - удаление
```bash
rm file.txt              # удалить файл
rm -r directory          # рекурсивно удалить директорию
rm -f file.txt           # принудительное удаление без подтверждения
```
<h4>3. Просмотр и копирование</h4>

`cat` - вывести содержимое файла
```bash
cat file.txt
cat file1.txt file2.txt
```
`less` / `more` - просмотр с прокруткой
```bash
less large_file.txt
more large_file.txt
```
`head` - первые строки файла
```bash
head file.txt          # первые 10 строк
head -n 20 file.txt    # первые 20 строк
```
`tail` - последние строки файла
```bash
tail file.txt          # последние 10 строк
tail -n 20 file.txt    # последние 20 строк
tail -f logfile.txt    # следить за изменениями файла в реальном времени
```
`cp` - копирование
```bash
cp file1.txt file2.txt              # копировать файл
cp -r dir1 dir2                     # рекурсивное копирование директории
cp file.txt /path/to/destination/   # копировать в другую директорию
```
<h4>4. Поиск файлов и отслеживание изменений</h4>

`find` - поиск файлов по различным критериям
```bash
find /home -name "*.txt"           # найти все .txt файлы в /home
find . -type f -name "config*"     # найти файлы начинающиеся на "config"
find /var/log -mtime -7            # файлы измененные за последние 7 дней
```
`locate` - быстрый поиск по базе данных файлов
```bash
locate filename.txt
updatedb                          # обновить базу данных для locate
```
`tail -f` / `tail -F` - слежение за растущими файлами (логи):
```bash
tail -f /var/log/syslog              # следить за файлом в реальном времени
tail -F /var/log/nginx/access.log    # следить с переоткрытием файла
tail -f -n 50 app.log                # следить с выводом последних N строк
tail -f log1.log log2.log            # следить за несколькими файлами
```
`watch` - периодический мониторинг
```bash
watch -n 2 "ls -la"                   # проверять изменения каждые 2 секунды
watch -n 1 "ls -lh large_file.txt"    # следить за размером файла
watch -d "cat config.conf"            # следить за содержимым с highlight изменений
```
`diff` - сравнение двух файлов
```bash
diff file1.txt file2.txt       # простое сравнение
diff -u file1.txt file2.txt    # унифицированный формат (более читаемый)
diff -r dir1/ dir2/            # сравнение директорий рекурсивно
diff -w file1.txt file2.txt    # игнорировать пробелы
```
<h4>5. Архивация</h4>

`tar` - работа с архивами

Архивация:
```bash
tar -cvf archive.tar file1 file2 directory/    # объединить файлы без сжатия
tar -czvf archive.tar.gz directory/            # создать архив с gzip сжатием
tar -cjvf archive.tar.bz2 directory/           # создать архив с bzip2 сжатием
tar -cJvf archive.tar.xz directory/            # создать архив с xz сжатием
```
Распаковка:
```bash
tar -xvf archive.tar.gz                             # распаковать tar архив
tar -xvf archive.tar.gz -C /path/to/destination/    # распаковать в директорию
tar -tvf archive.tar.gz                             # просмотреть содержимое архива
```


Опции `tar`:
- `c` - создать архив
- `x` - распаковать архив
- `v` - подробный вывод
- `f` - указать имя файла
- `z` - работать с gzip
- `j` - работать с bzip2
- `J` - работать с xz
- `t` - показать содержимое

<h4>6. Управление правами доступа</h4>

Категории пользователей:

- `u` (user) - владелец файла
- `g` (group) - группа файла
- `o` (others) - все остальные пользователи
- `a` (all) - все категории (u+g+o)

Типы прав:
- `r` (read) - чтение (4)
- `w` (write) - запись (2)
- `x` (execute) - выполнение (1)

`chmod` - изменение прав

Обычный ввод:
```bash
chmod u+x script.sh             # дать право на выполнение владельцу
chmod g+rw file.txt             # дать права чтения и записи группе
chmod o-w file.txt              # забрать право записи у всех остальных
chmod u=rwx,g=rx,o= file.txt    # установить конкретные права
chmod a+x program               # дать право выполнения всем
```
Цифровой ввод:
```bash
chmod -R 755 directory/         # rwxr-xr-x (755) рекурсивно для директории
chmod 755 file.sh               # rwxr-xr-x (755)
chmod 644 file.txt              # rw-r--r-- (644)
chmod 700 secret_file           # rwx------ (700)
chmod 777 file.txt              # rwxrwxrwx (777)
```
Расшифровка цифровых прав:
- Первая цифра - владелец (u)
- Вторая цифра - группа (g)
- Третья цифра - остальные (o)

Цифровые значения:
- 7 = rwx (4+2+1)
- 6 = rw- (4+2)
- 5 = r-x (4+1)
- 4 = r-- (4)
- 3 = -wx (2+1)
- 2 = -w- (2)
- 1 = --x (1)
- 0 = --- (0)

`chown` - изменение владельца
```bash
chown username file.txt                   # изменить владельца файла
chown username:groupname file.txt         # изменить владельца и группу
chown :groupname file.txt                 # изменить только группу
chown -R username:groupname directory/    # рекурсивно изменить владельца директории
chown -h username symlink                 # изменить владельца по ссылке
```
<h4>6. Команды sed, grep, awk</h4>

`grep` - поиск содержимого

Обычный поиск:
```bash
grep "текст" file.txt              # простой поиск
grep -i "текст" file.txt           # игнорировать регистр
grep -r "текст" /path/to/dir/      # рекурсивный поиск в директории
grep -n "текст" file.txt           # показать номера строк
grep -v "текст" file.txt           # инвертировать поиск (строки БЕЗ текста)
grep -l "текст" *.txt              # показать только имена файлов
grep -c "текст" file.txt           # подсчитать количество совпадений
grep -A 3 "текст" file.txt         # показать 3 строки ПОСЛЕ совпадения
grep -B 2 "текст" file.txt         # показать 2 строки ДО совпадения
grep -C 2 "текст" file.txt         # показать 2 строки ДО и ПОСЛЕ
```
Регулярные выражения:
```bash
grep "^start" file.txt                # строки, начинающиеся с "start"
grep "end$" file.txt                  # строки, заканчивающиеся на "end"
grep "[0-9]" file.txt                 # строки, содержащие цифры
grep -E "(error|warning)" file.txt    # используя extended regex
```
В нескольких файлах:
```bash
grep "текст" *.txt                                # в .txt файлах в директории
grep -r "текст"                                   # во всех файлах рекурсивно
find . -name "*.java" -exec grep "текст" {} \;    # в файлах определенного типа
find . -name "*.java" | xargs grep "текст"        # в файлах определенного типа
```
`sed` - редактирование текста

Флаги:
- `g` - глобальная замена (все вхождения в строке)
- `i` - игнорировать регистр
- `p` - печатать строку, если была замена
- `d` - удалить строку

Замена текста:
```bash
sed 's/old/new/' file.txt              # заменить первое вхождение в строке
sed 's/old/new/g' file.txt             # заменить все вхождения
sed 's/old/new/2' file.txt             # заменить только второе вхождение
sed 's/old/new/gI' file.txt            # глобально + игнорировать регистр
```
Удаление строк:
```bash
sed '5d' file.txt                      # удалить 5-ю строку
sed '1,3d' file.txt                    # удалить строки 1-3
sed '/pattern/d' file.txt              # удалить строки с паттерном
sed '/start/,/end/d' file.txt          # удалить диапазон строк
```
Вывод определенных строк:
```bash
sed -n '10,20p' file.txt               # вывести строки 10-20
sed -n '/pattern/p' file.txt           # вывести строки с паттерном
```
Вставка и добавление текста:
```bash
sed '2i\Inserted line' file.txt        # вставить ПЕРЕД строкой 2
sed '2a\Appended line' file.txt        # добавить ПОСЛЕ строки 2
```
Редактирование на месте (изменение файла):
```bash
sed -i 's/old/new/g' file.txt          # изменить файл (GNU sed)
sed -i.bak 's/old/new/g' file.txt      # создать backup с расширением .bak
```
`awk` - обработка структурированных данных

Встроенные переменные:
- `$0` - вся строка
- `$1, $2, ... $NF` - поля (столбцы)
- `NF` - количество полей в текущей строке
- `NR` - номер текущей строки
- `FS` - разделитель полей (по умолчанию пробел/таб)
- `OFS` - разделитель полей на выводе

Базовые примеры:
```bash
awk '{print $1, $3}' file.txt                  # Вывести 1 и 3 столбцы
awk '{print $0, "(" NF " fields)"}' file.txt   # Вывести всю строку и количество полей
awk '$3 > 100' file.txt                        # Вывести строки, где 3 поле > 100
awk '{print NR ":", $0}' file.txt              # Вывести строки с номерами
awk '{sum += $1} END {print "Total:", sum}' file.txt    # Сумма 1 столбца
```
Продвинутые примеры:
```bash
# Использовать другой разделитель
awk -F: '{print $1, $6}' /etc/passwd          # разделитель ":"
awk -F',' '{print $2, $3}' data.csv           # для CSV файлов

# Вывести строки между двумя паттернами
awk '/start/,/end/' file.txt

# Статистика по файлу
awk 'END {print "Lines:", NR, "Fields per line:", NF}' file.txt

# Группировка и агрегация
awk '{count[$1]++} END {for (i in count) print i, count[i]}' log.txt

# Условные действия
awk '{if ($3 > 50) print "HIGH:", $0; else print "LOW:", $0}' data.txt

# Изменить разделитель вывода
awk 'BEGIN {OFS="|"} {print $1, $2, $3}' file.txt
```